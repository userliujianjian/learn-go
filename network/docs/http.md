### HTTP篇


![http协议](img/http-https-diff.png)
#### **HTTP和HTTPS有哪些区别？**
- 分析：基础在于**超稳本传输协议、端口号，CA证书-服务器身份**，亮点在于点出基于**建立连接、断开连接握手次数**（TCP连接时 三次握手SYN(客户端-服务器端)、SYN+ACK（服务器端-客户端）、ACK（客户端-服务器端）），也可以引导面试官问TCP三四次握手
- 答案：
	- 安全传输：HTTP是超文本传输协议，信息是铭文传输，存在安全风险问题。HTTPS则解决HTTP不安全的缺陷，在TCP和HTTP网络层之间加入了SSL/TLS安全协议，使得报文能够加密传输。
	- 是否加密：HTTP连接建立相对简单，TCP三次握手之后便可进行HTTP的报文传输。而HTTPS在TCP三次握手之后，还需要进行SSL/TLS的握手过程，才可以加密报文传输。
	- 默认端口：两者的默认端口不同，HTTP默认80端口，HTTPS默认443端口
	- CA证书：HTTPS协议需要想CA（证书权威机构）申请数字证书，来保证服务器的身份时可信的。

#### HTTP状态码有哪些
![http状态码](img/http-code.png)

- 1xx 类状态码属于提示信息，是协议处理中的一种中间状态，实际用到的比较少
- 2xx 类状态码标识服务器成功处理了客户端的请求，也是我们最愿意看到的状态码。
	- 200：标识一切征程。
	- 204: 与200基本相同，但响应头没有body数据
	- 206 是应用于http分块下载或断点续传，标识响应返回的body数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态
- 3xx类状态码标识客户端请求的资源发生了变动，需要客户端用新的url重新发送请求获取资源，也就是重定向。
	- 301: 标识永久重定向，说明请求的资源不存在了，需要用新的url再次访问
	- 302 标识临时重定向，说明请求资源还在，但暂时需要用另一个URL来标识访问
	301和302都会在响应头离是用字段Location，知名后需要跳转的URL，浏览器会自动重定向新的URL
	- 304: 不具有跳转含义，标识资源为修改，重定向仪存在的缓冲文件，也称缓存重定向，也就是告诉客户端可以继续使用缓存资源，用于缓存控制。
- 4xx 类状态码标识客户端发送报文有误，服务器无法处理，也就是错误吗的含义。
	- 400 标识客户端请求的报文错误，服务器无法处理，但只是个笼统的错误
	- 403 表示服务器禁止访问资源，并不是客户端的请求出错
	- 404 表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。
- 5xx 类状态码标识客户端请求报文正确，但是服务器处理时内部发生错误，属于服务器端的错误码。
	- 500（内部服务错误）：与400类型，是个笼统的错误码，服务器发生了什么错误，我们并不知道
	- 501（未实现）:标识客户端请求的功能还不支持，类似即将开业敬请期待的意思。
	- 502（网关错误）:通常是服务器作为网关或代理时返回的错误码，表示Nginx服务正常，后端服务器返回一个错误，导致Nginx无法理解。
	- 503（服务不可用）:标识服务器当前很忙，暂时无法响应客户端，类似“网络服务正忙，请稍后重试”的意思
	- 504（网关超时）: 通俗讲Nginx去请求后端服务，后端服务未及时响应（当nginx超过自己配置的超时时间还没收到回应）
	- 505（不支持http版本）：505 HTTP 版本不支持的错误状态代码意味着服务器不支持请求消息中使用的 HTTP协议版本，因此无法处理 请求
	- 506（变体也协商）：这种状态码通常与内容协商机制相关，表示在进行内容协商时发生了无限循环。客户端可能需要检查请求头和服务器配置以解决问题。（涉及到 HTTP 状态码 506 时，特别是涉及内容协商问题时，通常需要检查 Nginx 配置。）

通俗的来说，nginx作为一个代理服务器，将请求转发到其他服务器或者php-cgi来处理，当nginx收到了无法理解的响应时，就返回502。当nginx超过自己配置的超时时间还没有收到请求时，就返回504错误


参考文章：https://www.xiaolincoding.com/network/2_http/http_interview.html
