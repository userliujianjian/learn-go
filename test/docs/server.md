## 服务端常见面试题

#### 身份验证Session+Cookie跟JWT验证对比
- 分析：思路就是讲出两种模式实现机制，结合实际项目说，JWT就围绕 安全性（扩展容灾）、可扩展性、复杂性结合项目说效果会更好
- 答案：
	- 容灾：
		- session+cookie，客户端存Cookie标识对应服务端的session文件，一旦服务器出错，会导致全量重新登陆
		- JWT安全取决于所选的算法和密钥管理，token存在客户端（三段：算法标识、base64encode元数据、加密编码），服务崩溃后令牌不会丢失
	- 安全性（导向：xss、csrf攻击问题）：
		- session服务端需要使用安全的cookie标识，防止客户端篡改cookie使用https保护通信。常见问题有 xss、csrf攻击
		- JWT的安全措施在于加密算法和密钥管理，如RS256
	- 可扩展性：
		- Session+Cookie可以使用负载均衡和共享session数据的方法，类似使用memcache标记cookie对应的服务器
		- JWT在分布式具有较好的扩展，每个服务实例都是独立验证和解析token，无需共享状态
	- 复杂性（围绕分布式环境）：
		- session+cookie验证机制在维护和管理用户状态方面可能较为复杂，尤其是需要共享状态的分布式环境。
		- JWT通常较为简单因为本身是无状态的，需要考虑的是token刷新和过期等问题

#### 如何防止XSS、CSRF攻击
- 分析：前提是知道什么是xss和csrf原理，然后围绕着漏洞去修补就好了（最终的方案就是花钱，没有花钱的不是哇，买高防服务等）
- 答案：
	- 攻击原理和步骤：
		- XSS 攻击是一种通过注入恶意脚本代码到网页中，使用户浏览器执行这些脚本的攻击方式。攻击者通过向网页中插入可执行脚本，成功利用用户对网站的信任，实现恶意操作。
			- 注入恶意脚本代码，可以是javascript、html等前端脚本语言
			- 执行恶意脚本：浏览器加载了包含恶意的脚本页面
			- 窃取信息例如：document.cookie
			- 劫持会话：攻击者利用窃取的信息，冒充合法用户执行一些恶意操作，修改用户信息，发送恶意请求等
		- CSRF 攻击是一种通过伪装用户的请求，实现对用户账户的未经授权的操作的攻击方式。攻击者利用用户已经在其他站点登录的身份，冒充用户发起一些恶意的请求。
			- 用户登陆其他站点
			- 伪造请求
			- 引诱用户访问
			- 执行伪造请求
			- 未经授权的操作
	- 防御机制：
		- xss 防御
			- 输入验证和过滤（防止SQL注入）
			- 转译输入
			- 使用content Security Policy（CSP）
			- 使用HttpOnly和Secure标记Cookie
			- 使用安全的编码库
		- CSRF防御
			- 同源检测（Origin和Referer检测）
			- 使用CsRFtoken
			- 验证码
			- 限制敏感操作的HTTP方法
			- 使用SameSite cookie属性


	